<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Clingo C API: clingo_propagator Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="clingo.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Clingo C API
   </div>
   <div id="projectbrief">C API for clingo providing high level functions to control grounding and solving.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structclingo__propagator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">clingo_propagator Struct Reference<div class="ingroups"><a class="el" href="group__Control.html">Grounding and Solving</a> &raquo; <a class="el" href="group__Propagator.html">Theory Propagation</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An instance of this struct has to be registered with a solver to implement a custom propagator. </p>
<p>Not all callbacks have to be implemented and can be set to NULL if not needed. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Propagator.html" title="Extend the search with propagators for arbitrary theories. ">Theory Propagation</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="propagator_8c-example.html#_a32">propagator.c</a>.</dd>
</dl></div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a456c4c0e3ed629e8b548f7cc4fd830a1"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structclingo__propagator.html#a456c4c0e3ed629e8b548f7cc4fd830a1">init</a> )(<a class="el" href="group__Propagator.html#ga640db8ba73adaddd5dbe50b572b77f25">clingo_propagate_init_t</a> *init, void *data)</td></tr>
<tr class="memdesc:a456c4c0e3ed629e8b548f7cc4fd830a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called once before each solving step.  <a href="#a456c4c0e3ed629e8b548f7cc4fd830a1">More...</a><br /></td></tr>
<tr class="separator:a456c4c0e3ed629e8b548f7cc4fd830a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a666b871bab495a9e5904b6109c92feda"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structclingo__propagator.html#a666b871bab495a9e5904b6109c92feda">propagate</a> )(<a class="el" href="group__Propagator.html#ga1cf43bea08101abb8b8cc7711c4c7165">clingo_propagate_control_t</a> *control, <a class="el" href="group__BasicTypes.html#gaa95dd19334e536397bbad174c8fa4ff8">clingo_literal_t</a> const *changes, size_t size, void *data)</td></tr>
<tr class="memdesc:a666b871bab495a9e5904b6109c92feda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can be used to propagate solver literals given a <a class="el" href="group__Propagator.html#ga6198e3190869e937ca7135e5314ddf26">partial assignment</a>.  <a href="#a666b871bab495a9e5904b6109c92feda">More...</a><br /></td></tr>
<tr class="separator:a666b871bab495a9e5904b6109c92feda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8108d1789d05862f636c6ca9328d4b88"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structclingo__propagator.html#a8108d1789d05862f636c6ca9328d4b88">undo</a> )(<a class="el" href="group__Propagator.html#ga1cf43bea08101abb8b8cc7711c4c7165">clingo_propagate_control_t</a> *control, <a class="el" href="group__BasicTypes.html#gaa95dd19334e536397bbad174c8fa4ff8">clingo_literal_t</a> const *changes, size_t size, void *data)</td></tr>
<tr class="memdesc:a8108d1789d05862f636c6ca9328d4b88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever a solver undoes assignments to watched solver literals.  <a href="#a8108d1789d05862f636c6ca9328d4b88">More...</a><br /></td></tr>
<tr class="separator:a8108d1789d05862f636c6ca9328d4b88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a883ef32f49030ae701550bbdbcf4a0"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structclingo__propagator.html#a3a883ef32f49030ae701550bbdbcf4a0">check</a> )(<a class="el" href="group__Propagator.html#ga1cf43bea08101abb8b8cc7711c4c7165">clingo_propagate_control_t</a> *control, void *data)</td></tr>
<tr class="memdesc:a3a883ef32f49030ae701550bbdbcf4a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is similar to <a class="el" href="group__Propagator.html#ga1e5504a8332ed8c453197046d201cd4b">clingo_propagate_control_propagate()</a> but is called without a change set on propagation fixpoints.  <a href="#a3a883ef32f49030ae701550bbdbcf4a0">More...</a><br /></td></tr>
<tr class="separator:a3a883ef32f49030ae701550bbdbcf4a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3a883ef32f49030ae701550bbdbcf4a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a883ef32f49030ae701550bbdbcf4a0">&#9670;&nbsp;</a></span>check</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* clingo_propagator::check) (<a class="el" href="group__Propagator.html#ga1cf43bea08101abb8b8cc7711c4c7165">clingo_propagate_control_t</a> *control, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is similar to <a class="el" href="group__Propagator.html#ga1e5504a8332ed8c453197046d201cd4b">clingo_propagate_control_propagate()</a> but is called without a change set on propagation fixpoints. </p>
<p>When exactly this function is called, can be configured using the <a class="el" href="group__Propagator.html#gaa268d0dcfc313360d57b9164fea21074">clingo_propagate_init_set_check_mode()</a> function.</p>
<dl class="section note"><dt>Note</dt><dd>This function is called even if no watches have been added.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">control</td><td>control object for the target solver </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>user data for the callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the call was successful </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Propagator.html#gaa1073f823a56901887b3c387481ce4be" title="Typedef for clingo_propagator::check(). ">clingo_propagator_check_callback_t</a> </dd></dl>

</div>
</div>
<a id="a456c4c0e3ed629e8b548f7cc4fd830a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a456c4c0e3ed629e8b548f7cc4fd830a1">&#9670;&nbsp;</a></span>init</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* clingo_propagator::init) (<a class="el" href="group__Propagator.html#ga640db8ba73adaddd5dbe50b572b77f25">clingo_propagate_init_t</a> *init, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called once before each solving step. </p>
<p>It is used to map relevant program literals to solver literals, add watches for solver literals, and initialize the data structures used during propagation.</p>
<dl class="section note"><dt>Note</dt><dd>This is the last point to access symbolic and theory atoms. Once the search has started, they are no longer accessible.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">init</td><td>initizialization object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>user data for the callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the call was successful </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Propagator.html#ga67bdda9d9d2ddaa31acc41e5a569db33" title="Typedef for clingo_propagator::init(). ">clingo_propagator_init_callback_t</a> </dd></dl>

</div>
</div>
<a id="a666b871bab495a9e5904b6109c92feda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a666b871bab495a9e5904b6109c92feda">&#9670;&nbsp;</a></span>propagate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* clingo_propagator::propagate) (<a class="el" href="group__Propagator.html#ga1cf43bea08101abb8b8cc7711c4c7165">clingo_propagate_control_t</a> *control, <a class="el" href="group__BasicTypes.html#gaa95dd19334e536397bbad174c8fa4ff8">clingo_literal_t</a> const *changes, size_t size, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Can be used to propagate solver literals given a <a class="el" href="group__Propagator.html#ga6198e3190869e937ca7135e5314ddf26">partial assignment</a>. </p>
<p>Called during propagation with a non-empty array of <a class="el" href="group__Propagator.html#gab4a0f0767529ad000f5d80b56b74104f">watched solver literals</a> that have been assigned to true since the last call to either propagate, undo, (or the start of the search) - the change set. Only watched solver literals are contained in the change set. Each literal in the change set is true w.r.t. the current <a class="el" href="group__Propagator.html#ga6198e3190869e937ca7135e5314ddf26">assignment</a>. <a class="el" href="group__Propagator.html#ga45c65882cf55edcf8782f2ce13d66e2b">clingo_propagate_control_add_clause()</a> can be used to add clauses. If a clause is unit resulting, it can be propagated using <a class="el" href="group__Propagator.html#ga1e5504a8332ed8c453197046d201cd4b">clingo_propagate_control_propagate()</a>. If the result of either of the two methods is false, the propagate function must return immediately.</p>
<p>The following snippet shows how to use the methods to add clauses and propagate consequences within the callback. The important point is to return true (true to indicate there was no error) if the result of either of the methods is false. </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> result;</div><div class="line"><a class="code" href="group__BasicTypes.html#gaa95dd19334e536397bbad174c8fa4ff8">clingo_literal_t</a> clause[] = { ... };</div><div class="line"></div><div class="line"><span class="comment">// add a clause</span></div><div class="line"><span class="keywordflow">if</span> (!<a class="code" href="group__Propagator.html#ga45c65882cf55edcf8782f2ce13d66e2b">clingo_propagate_control_add_clause</a>(control, clause, <a class="code" href="group__Propagator.html#ggab158fba808ea7d1eee7f955858aca36ca35c9cfe61e2130b0292866860218ee58">clingo_clause_type_learnt</a>, &amp;result) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div><div class="line"><span class="keywordflow">if</span> (!result) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div><div class="line"><span class="comment">// propagate its consequences</span></div><div class="line"><span class="keywordflow">if</span> (!<a class="code" href="group__Propagator.html#ga1e5504a8332ed8c453197046d201cd4b">clingo_propagate_control_propagate</a>(control, &amp;result) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div><div class="line"><span class="keywordflow">if</span> (!result) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div><div class="line"></div><div class="line"><span class="comment">// add further clauses and propagate them</span></div><div class="line">...</div><div class="line"></div><div class="line">return <span class="keyword">true</span>;</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>This function can be called from different solving threads. Each thread has its own assignment and id, which can be obtained using <a class="el" href="group__Propagator.html#gafc162fc6dd12dbbf1c39c0562e3533c3">clingo_propagate_control_thread_id()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">control</td><td>control object for the target solver </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">changes</td><td>the change set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>the size of the change set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>user data for the callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the call was successful </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Propagator.html#gae870d426cc8f9c3db7b5aabb958c5931" title="Typedef for clingo_propagator::propagate(). ">clingo_propagator_propagate_callback_t</a> </dd></dl>

</div>
</div>
<a id="a8108d1789d05862f636c6ca9328d4b88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8108d1789d05862f636c6ca9328d4b88">&#9670;&nbsp;</a></span>undo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* clingo_propagator::undo) (<a class="el" href="group__Propagator.html#ga1cf43bea08101abb8b8cc7711c4c7165">clingo_propagate_control_t</a> *control, <a class="el" href="group__BasicTypes.html#gaa95dd19334e536397bbad174c8fa4ff8">clingo_literal_t</a> const *changes, size_t size, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever a solver undoes assignments to watched solver literals. </p>
<p>This callback is meant to update assignment dependent state in the propagator.</p>
<dl class="section note"><dt>Note</dt><dd>No clauses must be propagated in this callback.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">control</td><td>control object for the target solver </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">changes</td><td>the change set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>the size of the change set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>user data for the callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Propagator.html#gae472d20ebae3559bdd3e1eb1f2a48791" title="Typedef for clingo_propagator::undo(). ">clingo_propagator_undo_callback_t</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="clingo_8h_source.html">clingo.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 8 2017 09:57:37 for Clingo C API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
